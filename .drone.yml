kind: pipeline
type: docker
name: default

clone:
  disable: true

trigger:
  branch:
  - master
  event:
  - push

steps:
- name: Clone the project
  image: alpine/git
  commands:
  - git clone https://github.com/dothq/browser-ff .

- name: Setup the remotes
  image: alpine/git
  commands:
  - git remote set-url origin hg::https://hg.mozilla.org/mozilla-unified
  - git remote update
  - git remote add dot https://github.com/dothq/browser-ff
  
- name: Bootstrap
  commands:
  - ./mach bootstrap --no-interactive

- name: Build Dot Browser
  commands:
  - ./mach build